{% extends "layouts/main.html" %}
{% from "components/service-header/macro.njk" import serviceHeader %}
{% set pageName = "Organize Check answer page - Apply for a county parish holding number in England" %}

{% block header %}
{{ serviceHeader({
organisationName: "Defra",
productName: "Form Designer",
serviceName: "",
containerClasses: containerClasses,
accountName: "Chris Smith",
homepageLink: "/",
signOutLink: "/titan-mvp-1.2/onboarding/sign-out-confirmation",
navigationItems: [
{ href: "/titan-mvp-1.2/library", text: "Forms library", id: "nav-library" },
{ href: "/titan-mvp-1.2/form-overview/index", text: "Overview", id: "nav-overview" },
{ href: "/titan-mvp-1.2/form-editor/listing", text: "Editor", id: "nav-editor", active: true }
]
}) }}

<div class="x-govuk-masthead x-govuk-masthead--large">
    <div class="govuk-width-container">

        {{ govukBackLink({
        classes: "govuk-back-link--inverse govuk-!-margin-bottom-0",
        text: "Back to add and edit pages",
        href: "/titan-mvp-1.2/form-editor/listing"
        }) }}

        <hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible"
            style="border-bottom: 1px solid white; margin-bottom: 0;" />

        <div class="govuk-grid-row">
            <div class="govuk-grid-column-full-from-desktop">
                <h1 class="x-govuk-masthead__title">
                    Apply for a county parish holding (CPH) number
                </h1>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block content %}

<!-- Outer grid row to hold BOTH columns side by side from desktop width -->
<div class="govuk-grid-row">

    <!-- LEFT COLUMN: Organization Controls -->
    <div class="govuk-grid-column-one-half-from-desktop" id="container"
        style="flex: 1 1 75%; height: 100%; overflow-y: auto;">
        <div class="govuk-summary-card govuk-!-margin-top-0" style="border-left: 10px solid #b1b4b6;">
            <div class="govuk-summary-card__content govuk-!-padding-top-0" style="background-color: #f3f2f1;">
                <dl class="govuk-summary-list">
                    <div class="govuk-summary-list__row">
                        <dd class="govuk-summary-list__value">

                            <!-- Organization Controls Container -->
                            <div class="govuk-grid-row" id="organization-container">
                                <div id="organization-controls">
                                    <div class="govuk-summary-card__content" style="margin-bottom: 0;">
                                        <!-- Sub Navigation -->
                                        <nav class="moj-sub-navigation" aria-label="Sub navigation">
                                            <ul class="moj-sub-navigation__list" id="nav-list2">
                                                <li class="moj-sub-navigation__item">
                                                    <a class="moj-sub-navigation__link" aria-current="page"
                                                        href="#organization-controls">
                                                        Organize check answers
                                                    </a>
                                                </li>
                                            </ul>
                                        </nav>

                                        <span class="govuk-caption-l">Check answers</span>
                                        <h1 class="govuk-heading-l">Organize check answers</h1>

                                        <form class="form" action="/titan-mvp-1.2/form-editor/listing" method="post">
                                            {% from "govuk/components/radios/macro.njk" import govukRadios %}
                                            {% from "govuk/components/input/macro.njk" import govukInput %}
                                            {% from "govuk/components/button/macro.njk" import govukButton %}

                                            <!-- Add Section Heading -->
                                            <div class="govuk-form-group">
                                                <label class="govuk-label govuk-label--m" for="section-heading">
                                                    Add section heading
                                                </label>
                                                <div class="govuk-hint" id="section-heading-hint">
                                                    Add a heading to group related questions together
                                                </div>
                                                <input class="govuk-input" id="section-heading" name="sectionHeading"
                                                    type="text" aria-describedby="section-heading-hint"
                                                    placeholder="e.g. Business details">
                                                <button type="button"
                                                    class="govuk-button govuk-button--secondary govuk-!-margin-top-2"
                                                    onclick="addSectionHeading()">
                                                    Add section heading
                                                </button>
                                            </div>

                                            <hr
                                                class="govuk-section-break govuk-section-break--l govuk-section-break--visible">

                                            <!-- Organization List -->
                                            <div class="govuk-form-group">
                                                <label class="govuk-label govuk-label--m">
                                                    Check answers order
                                                </label>
                                                <div class="govuk-hint">
                                                    Drag and drop to reorder items, or use the buttons to move items up
                                                    and down
                                                </div>

                                                <div id="organization-list" class="govuk-!-margin-top-4">
                                                    <!-- Items will be populated by JavaScript -->
                                                </div>
                                            </div>

                                            <!-- Buttons -->
                                            <div class="govuk-button-group">
                                                <button id="edit-order-button" type="button"
                                                    class="govuk-button govuk-button--inverse" style="display: none;">
                                                    Re-order
                                                </button>
                                            </div>

                                            <div class="govuk-button-group">
                                                {{ govukButton({
                                                text: "Save and continue",
                                                type: "submit",
                                                id: "continue-button"
                                                }) }}

                                                <a href="#tab-one-check-answers" class="govuk-skip-link"
                                                    style="margin-bottom: 30px!important;"
                                                    data-module="govuk-skip-link">
                                                    Skip to page preview
                                                </a>
                                            </div>
                                        </form>
                                    </div> <!-- .govuk-summary-card__content -->
                                </div> <!-- #organization-controls -->
                            </div> <!-- #organization-container -->

                        </dd>
                    </div>
                </dl>
            </div>
        </div>
    </div>
    <!-- END LEFT COLUMN -->

    <!-- RIGHT COLUMN: Check Answers Preview -->
    <div class="govuk-grid-column-one-half-from-desktop" id="second-container"
        style="outline: solid 1px #008938; height: 100%; position: sticky; top: 0; padding: 20px; box-shadow: 5px 10px #008938; overflow-y: auto; max-height: 100vh;">
        <!-- Before content -->
        <div id="before-content" style="background-color: #cce2d8;">
            <p class="govuk-body-s" style="margin-bottom: 0; color: #005a30; padding: 2px 8px 3px; text-align: center;">
                Preview
            </p>
        </div>

        <div style="margin-top: 60px!important;">
            {% from "govuk/components/tabs/macro.njk" import govukTabs %}

            <div class="govuk-tabs" data-module="govuk-tabs">
                <h2 class="govuk-tabs__title">Contents</h2>
                <ul class="govuk-tabs__list">
                    <li class="govuk-tabs__list-item govuk-tabs__list-item--selected">
                        <a class="govuk-tabs__tab" href="#tab-one">Page preview</a>
                    </li>
                </ul>

                <div class="govuk-tabs__panel" id="tab-one">
                    <!-- Page Preview Content -->
                    <p class="govuk-body-s" style="margin-bottom: 30px; border-bottom: #008938 1px;">
                        <a href="#" class="govuk-link govuk-link--no-visited-state" rel="noreferrer noopener"
                            target="_blank">
                            Preview this page in a new tab
                        </a>
                    </p>

                    <!-- Dynamic Heading -->
                    <div id="heading-container">
                        {% if data['setName'] %}
                        <span id="dynamic-caption" class="govuk-caption-xl"
                            data-setname="{{ data['setName'] | capitalize }}">
                            {{ data['setName'] | capitalize }} 1
                        </span>
                        {% endif %}
                        <h1 class="govuk-heading-l" id="dynamic-heading">
                            Check your answers before sending your form
                        </h1>
                    </div>

                    <!-- Dynamic Summary List -->
                    <div id="dynamic-summary-list">
                        <!-- Content will be populated by JavaScript -->
                    </div>

                    <!-- Send Button -->
                    <button class="govuk-button govuk-!-margin-top-6" id="once-button" disabled>
                        Send
                    </button>

                    <a href="#tab-one-check-answers" class="govuk-skip-link" style="margin-bottom: 30px!important;"
                        data-module="govuk-skip-link">
                        Skip to page settings
                    </a>
                </div> <!-- End of Tab One -->
            </div> <!-- End of govuk-tabs -->
        </div> <!-- End of margin-top: 60px container -->
    </div> <!-- End of second-container -->

</div> <!-- End .govuk-grid-row (which wraps both columns) -->

<!-- Include SortableJS Library -->
<script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>

<!-- JavaScript for organization functionality -->
<script>
    // Sample data structure for check answers items
    let checkAnswersItems = [
        { id: 1, type: 'question', key: 'Business registered with RPA', value: 'Yes', section: null },
        { id: 2, type: 'question', key: 'Country for livestock', value: 'England', section: null },
        { id: 3, type: 'question', key: 'Arrival date of livestock', value: '20 04 2024', section: null },
        { id: 4, type: 'question', key: 'Type of livestock', value: 'Cow', section: null },
        { id: 5, type: 'question', key: 'Applicant\'s name', value: 'John Doe', section: null },
        { id: 6, type: 'question', key: 'Business name', value: 'Doe Farms Ltd', section: null },
        { id: 7, type: 'question', key: 'Main phone number', value: '07700 900457', section: null },
        { id: 8, type: 'question', key: 'Email address', value: 'john.doe@example.com', section: null },
        { id: 9, type: 'question', key: 'Business address', value: '123 Farm Lane, Rural Town', section: null },
        { id: 10, type: 'question', key: 'Business purpose', value: 'Livestock farming', section: null },
        { id: 11, type: 'question', key: 'National Grid field number', value: 'NG123456', section: null },
        { id: 12, type: 'question', key: 'Methodology statement', value: '1 file uploaded', section: null }
    ];

    let sections = [];
    let nextSectionId = 1;

    document.addEventListener("DOMContentLoaded", function () {
        renderOrganizationList();
        renderPreview();
        initializeSortable();
    });

    function addSectionHeading() {
        const headingInput = document.getElementById('section-heading');
        const headingText = headingInput.value.trim();

        if (headingText) {
            const section = {
                id: nextSectionId++,
                title: headingText
            };
            sections.push(section);
            headingInput.value = '';
            renderOrganizationList();
            renderPreview();
        }
    }

    function renderOrganizationList() {
        const container = document.getElementById('organization-list');
        container.innerHTML = '';

        // Render sections first
        sections.forEach(section => {
            const sectionDiv = document.createElement('div');
            sectionDiv.className = 'govuk-summary-card govuk-!-margin-bottom-4';
            sectionDiv.innerHTML = `
        <div class="govuk-summary-card__title-wrapper">
          <h2 class="govuk-summary-card__title">${section.title}</h2>
          <div class="govuk-summary-card__actions">
            <button type="button" class="govuk-button govuk-button--secondary govuk-button--small" 
                    onclick="removeSection(${section.id})">
              Remove section
            </button>
          </div>
        </div>
        <div class="govuk-summary-card__content">
          <div class="govuk-hint">Drag questions here to group them under this section</div>
          <ol class="gem-c-reorderable-list js-enabled section-items" data-section-id="${section.id}" data-module="reorderable-list">
            ${checkAnswersItems.filter(item => item.section === section.id).map(item =>
                renderItem(item, true)
            ).join('')}
          </ol>
        </div>
      `;
            container.appendChild(sectionDiv);
        });

        // Render ungrouped items
        const ungroupedItems = checkAnswersItems.filter(item => item.section === null);
        if (ungroupedItems.length > 0) {
            const ungroupedDiv = document.createElement('div');
            ungroupedDiv.className = 'govuk-summary-card govuk-!-margin-bottom-4';
            ungroupedDiv.innerHTML = `
        <div class="govuk-summary-card__title-wrapper">
          <h2 class="govuk-summary-card__title">Ungrouped questions</h2>
        </div>
        <div class="govuk-summary-card__content">
          <ol class="gem-c-reorderable-list js-enabled ungrouped-items" data-module="reorderable-list">
            ${ungroupedItems.map(item => renderItem(item, false)).join('')}
          </ol>
        </div>
      `;
            container.appendChild(ungroupedDiv);
        }

        // Update move buttons and edit button visibility
        updateMoveButtons();
        updateEditButtonVisibility();
    }

    function renderItem(item, isInSection) {
        return `
      <li class="gem-c-reorderable-list__item" draggable="true" data-item-id="${item.id}">
        <div class="gem-c-reorderable-list__wrapper">
          <div class="gem-c-reorderable-list__content">
            <div class="govuk-!-margin-bottom-2">
              <p class="govuk-body fauxlabel item-label-display">
                ${item.key}
              </p>
              <p class="govuk-body-s govuk-!-margin-top-0 govuk-!-margin-bottom-0" style="color: #505a5f;">
                ${item.value}
              </p>
            </div>
          </div>
          <div class="gem-c-reorderable-list__actions">
            <button class="gem-c-button govuk-button govuk-button--secondary js-reorderable-list-up"
              type="button" aria-label="Move item up" style="display: none;">Up</button>
            <button class="gem-c-button govuk-button govuk-button--secondary js-reorderable-list-down"
              type="button" aria-label="Move item down" style="display: inline-block;">Down</button>
            ${isInSection ?
                `<a href="#" class="govuk-link govuk-link--destructive js-remove-from-section" 
                  role="button" aria-label="Remove from section">Remove from section</a>` :
                `<a href="#" class="govuk-link govuk-link--destructive js-add-to-section" 
                  role="button" aria-label="Add to section">Add to section</a>`
            }
          </div>
        </div>
      </li>
    `;
    }

    function removeSection(sectionId) {
        // Move all items in this section back to ungrouped
        checkAnswersItems.forEach(item => {
            if (item.section === sectionId) {
                item.section = null;
            }
        });

        // Remove the section
        sections = sections.filter(section => section.id !== sectionId);
        renderOrganizationList();
        renderPreview();
    }

    function addToSection(itemId) {
        // For now, add to the first section. In a real implementation, you'd show a dropdown
        if (sections.length > 0) {
            const item = checkAnswersItems.find(item => item.id === itemId);
            if (item) {
                item.section = sections[0].id;
                renderOrganizationList();
                renderPreview();
            }
        }
    }

    function removeFromSection(itemId) {
        const item = checkAnswersItems.find(item => item.id === itemId);
        if (item) {
            item.section = null;
            renderOrganizationList();
            renderPreview();
        }
    }

    function moveItem(itemId, direction) {
        const currentIndex = checkAnswersItems.findIndex(item => item.id === itemId);
        if (currentIndex === -1) return;

        const newIndex = direction === 'up' ? currentIndex - 1 : currentIndex + 1;
        if (newIndex >= 0 && newIndex < checkAnswersItems.length) {
            // Swap items
            [checkAnswersItems[currentIndex], checkAnswersItems[newIndex]] =
                [checkAnswersItems[newIndex], checkAnswersItems[currentIndex]];
            renderOrganizationList();
            renderPreview();
        }
    }

    function initializeSortable() {
        const sortableContainers = document.querySelectorAll('.gem-c-reorderable-list');

        sortableContainers.forEach(container => {
            new Sortable(container, {
                animation: 150,
                ghostClass: 'sortable-ghost',
                chosenClass: 'sortable-chosen',
                dragClass: 'highlight-dragging',
                onStart: function (evt) {
                    const index = evt.oldIndex;
                    highlightPreviewItem(index);
                },
                onEnd: function (evt) {
                    updateAllItemsOrder();
                    renderPreview();
                    updateMoveButtons();
                    removePreviewHighlights();
                }
            });
        });
    }

    function updateAllItemsOrder() {
        // Update the order of items based on their current position in the DOM
        const allItems = [];

        // Get items from sections first
        sections.forEach(section => {
            const sectionContainer = document.querySelector(`[data-section-id="${section.id}"]`);
            if (sectionContainer) {
                const items = sectionContainer.querySelectorAll('.gem-c-reorderable-list__item');
                items.forEach(item => {
                    const itemId = parseInt(item.dataset.itemId);
                    const checkItem = checkAnswersItems.find(i => i.id === itemId);
                    if (checkItem) {
                        checkItem.section = section.id;
                        allItems.push(checkItem);
                    }
                });
            }
        });

        // Get ungrouped items
        const ungroupedContainer = document.querySelector('.ungrouped-items');
        if (ungroupedContainer) {
            const items = ungroupedContainer.querySelectorAll('.gem-c-reorderable-list__item');
            items.forEach(item => {
                const itemId = parseInt(item.dataset.itemId);
                const checkItem = checkAnswersItems.find(i => i.id === itemId);
                if (checkItem) {
                    checkItem.section = null;
                    allItems.push(checkItem);
                }
            });
        }

        // Update the main array with new order
        checkAnswersItems = allItems;
    }

    function highlightPreviewItem(index) {
        const previewContainer = document.getElementById('dynamic-summary-list');
        if (!previewContainer) return;

        // Remove any existing highlights
        removePreviewHighlights();

        // Add highlight to the corresponding preview item
        const previewItems = previewContainer.querySelectorAll('.govuk-summary-list__row');
        if (previewItems[index]) {
            previewItems[index].classList.add('highlight');
        }
    }

    function removePreviewHighlights() {
        const previewContainer = document.getElementById('dynamic-summary-list');
        if (!previewContainer) return;

        const items = previewContainer.querySelectorAll('.govuk-summary-list__row');
        items.forEach(item => item.classList.remove('highlight'));
    }

    function updateMoveButtons() {
        const allContainers = document.querySelectorAll('.gem-c-reorderable-list');

        allContainers.forEach(container => {
            const items = container.querySelectorAll('.gem-c-reorderable-list__item');
            items.forEach((item, index) => {
                const upButton = item.querySelector('.js-reorderable-list-up');
                const downButton = item.querySelector('.js-reorderable-list-down');

                if (upButton && downButton) {
                    // First item - only show Down
                    if (index === 0) {
                        upButton.style.display = 'none';
                        downButton.style.display = 'inline-block';
                    }
                    // Last item - only show Up
                    else if (index === items.length - 1) {
                        upButton.style.display = 'inline-block';
                        downButton.style.display = 'none';
                    }
                    // Middle items - show both
                    else {
                        upButton.style.display = 'inline-block';
                        downButton.style.display = 'inline-block';
                    }
                }
            });
        });
    }

    function updateEditButtonVisibility() {
        const editButton = document.getElementById('edit-order-button');
        const totalItems = checkAnswersItems.length;

        if (editButton) {
            editButton.style.display = totalItems > 1 ? 'inline-block' : 'none';
        }
    }

    // Add event handlers for up/down buttons and edit functionality
    document.addEventListener('click', function (e) {
        if (e.target.classList.contains('js-reorderable-list-up')) {
            const item = e.target.closest('.gem-c-reorderable-list__item');
            const prevItem = item.previousElementSibling;
            if (prevItem) {
                item.parentNode.insertBefore(item, prevItem);
                updateAllItemsOrder();
                renderPreview();
                updateMoveButtons();
            }
        } else if (e.target.classList.contains('js-reorderable-list-down')) {
            const item = e.target.closest('.gem-c-reorderable-list__item');
            const nextItem = item.nextElementSibling;
            if (nextItem) {
                item.parentNode.insertBefore(nextItem, item);
                updateAllItemsOrder();
                renderPreview();
                updateMoveButtons();
            }
        } else if (e.target.classList.contains('js-add-to-section')) {
            e.preventDefault();
            const item = e.target.closest('.gem-c-reorderable-list__item');
            const itemId = parseInt(item.dataset.itemId);
            addToSection(itemId);
        } else if (e.target.classList.contains('js-remove-from-section')) {
            e.preventDefault();
            const item = e.target.closest('.gem-c-reorderable-list__item');
            const itemId = parseInt(item.dataset.itemId);
            removeFromSection(itemId);
        }
    });

    // Add edit button functionality
    const editOrderButton = document.getElementById('edit-order-button');
    if (editOrderButton) {
        editOrderButton.addEventListener('click', function () {
            const listItems = document.querySelectorAll('.gem-c-reorderable-list__item');
            const actionButtons = document.querySelectorAll('.gem-c-reorderable-list__actions');
            const addSectionButton = document.getElementById('add-option-button');

            // Toggle button text and state
            const isEditing = editOrderButton.textContent.trim() === 'Done';
            editOrderButton.textContent = isEditing ? 'Re-order' : 'Done';

            // Toggle button style
            if (isEditing) {
                editOrderButton.classList.add('govuk-button--inverse');
            } else {
                editOrderButton.classList.remove('govuk-button--inverse');
            }

            // Show/hide add section button based on edit state
            if (addSectionButton) {
                addSectionButton.style.display = isEditing ? 'inline-block' : 'none';
            }

            // Toggle action buttons visibility
            actionButtons.forEach(actions => {
                actions.style.display = isEditing ? 'none' : 'flex';
            });

            // Update cursor style and hover effect
            listItems.forEach(item => {
                if (isEditing) {
                    item.style.cursor = 'default';
                    item.classList.remove('sortable-enabled');
                } else {
                    item.style.cursor = 'move';
                    item.classList.add('sortable-enabled');
                }
            });

            // Enable/disable sorting
            const sortableContainers = document.querySelectorAll('.gem-c-reorderable-list');
            sortableContainers.forEach(container => {
                if (container.sortable) {
                    container.sortable.destroy();
                }
                if (!isEditing) {
                    new Sortable(container, {
                        animation: 150,
                        ghostClass: 'sortable-ghost',
                        chosenClass: 'sortable-chosen',
                        dragClass: 'highlight-dragging',
                        onStart: function (evt) {
                            const index = evt.oldIndex;
                            highlightPreviewItem(index);
                        },
                        onEnd: function (evt) {
                            updateAllItemsOrder();
                            renderPreview();
                            updateMoveButtons();
                            removePreviewHighlights();
                        }
                    });
                }
            });

            // Update button visibility and focus when entering edit mode
            if (!isEditing) {
                updateMoveButtons();
                const firstItem = listItems[0];
                if (firstItem) {
                    const firstDownButton = firstItem.querySelector('.js-reorderable-list-down');
                    if (firstDownButton) {
                        firstDownButton.focus();
                    }
                }
            }
        });
    }

    function renderPreview() {
        const container = document.getElementById('dynamic-summary-list');

        let html = '';

        // Group items by section
        const groupedItems = {};
        sections.forEach(section => {
            groupedItems[section.id] = {
                section: section,
                items: checkAnswersItems.filter(item => item.section === section.id)
            };
        });

        const ungroupedItems = checkAnswersItems.filter(item => item.section === null);

        // Render sections first
        Object.values(groupedItems).forEach(group => {
            if (group.items.length > 0) {
                html += `<h2 class="govuk-heading-m">${group.section.title}</h2>`;
                html += '<div class="govuk-summary-list govuk-!-margin-bottom-9">';
                group.items.forEach(item => {
                    html += renderPreviewItem(item);
                });
                html += '</div>';
            }
        });

        // Render ungrouped items
        if (ungroupedItems.length > 0) {
            html += '<div class="govuk-summary-list govuk-!-margin-bottom-9">';
            ungroupedItems.forEach(item => {
                html += renderPreviewItem(item);
            });
            html += '</div>';
        }

        container.innerHTML = html;
    }

    function renderPreviewItem(item) {
        return `
      <div class="govuk-summary-list__row">
        <dt class="govuk-summary-list__key">
          ${item.key}
        </dt>
        <dd class="govuk-summary-list__value">
          ${item.value}
        </dd>
        <dd class="govuk-summary-list__actions">
          <a class="govuk-link govuk-link--no-visited-state" href="#" style="color: #b1b4b6; cursor: default;"
             onclick="event.preventDefault(); event.stopPropagation(); this.blur(); return false;">
            Change<span class="govuk-visually-hidden"> ${item.key.toLowerCase()}</span>
          </a>
        </dd>
      </div>
    `;
    }
</script>

<style>
    /* Styling for fauxlabel */
    .fauxlabel {
        border: 0;
        margin: 0;
    }

    .fauxlabel:focus,
    .fauxlabel:active {
        background-color: transparent !important;
    }

    .gem-c-reorderable-list .gem-c-reorderable-list__item:hover,
    .gem-c-reorderable-list__item:hover .fauxlabel {
        background-color: #fff;
        cursor: initial;
    }

    .gem-c-reorderable-list__item:hover .fauxlabel:focus {
        cursor: initial;
    }

    /* Highlighting styles */
    .highlight {
        background-color: #ffe5cc;
        border-bottom: 2px solid #ffb266;
    }

    .highlight-dragging {
        border: 2px dotted #ffb266;
        background-color: #f0f0f0;
    }

    .highlight-moving {
        border: 2px dashed #ff0;
    }

    /* Styles for the reorderable list */
    .gem-c-reorderable-list {
        list-style-type: none;
        margin: 0;
        padding: 0;
    }

    .gem-c-reorderable-list__item {
        margin-bottom: 15px;
        border-left: 5px solid #008938;
        outline: 1px solid #b1b4b6;
        padding: 15px;
        background-color: #fff;
    }

    .gem-c-reorderable-list__wrapper {
        display: flex;
        align-items: center;
    }

    .gem-c-reorderable-list__content {
        flex-grow: 1;
    }

    .gem-c-reorderable-list__actions {
        display: none;
        flex-direction: column;
        margin-left: 15px;
    }

    .gem-c-reorderable-list__actions .govuk-button {
        margin-bottom: 10px;
    }

    .govuk-body.fauxlabel.item-label-display {
        white-space: normal;
        word-wrap: break-word;
        overflow-wrap: break-word;
    }

    .sortable-ghost {
        opacity: 0.4;
    }

    .sortable-chosen {
        background-color: #e5f5ff;
    }

    /* Style for hover state of the list item */
    .gem-c-reorderable-list__item:hover {
        background-color: #f0f0f0;
        cursor: move;
    }

    /* Style for the chosen item (when selected) */
    .gem-c-reorderable-list__item.sortable-chosen {
        background-color: #e5f5ff;
        outline: 4px solid #ffdd00;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    .govuk-summary-card__actions {
        display: flex;
        gap: 10px;
    }

    .govuk-button--small {
        padding: 5px 10px;
        font-size: 14px;
    }

    /* Section items styling */
    .section-items,
    .ungrouped-items {
        min-height: 50px;
        padding: 10px;
        border: 2px dashed #ccc;
        border-radius: 4px;
        transition: border-color 0.2s;
    }

    .section-items:hover,
    .ungrouped-items:hover {
        border-color: #00703c;
    }
</style>

{% endblock %}