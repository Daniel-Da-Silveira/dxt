{% extends "layouts/main.html" %}

{% block pageTitle %}
  Select address - GOV.UK Prototype Kit
{% endblock %}

{% block content %}
  {{ govukBackLink({
    text: "Back",
    href: "javascript: window.history.go(-1)"
  }) }}

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <form method="post" autocomplete="off" action="/dwp-find-an-address-plugin-simple/address-select-multi">
        <div class="govuk-form-group">
          <fieldset class="govuk-fieldset">
            <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
              <h1 class="govuk-fieldset__heading">
                Select an address
              </h1>
            </legend>

            <p class="govuk-body">{{ addressData.length or data.results.length }} addresses found for
              <strong>{{ data.postcode }}</strong>.
              <a href="/dwp-find-an-address-plugin-simple" class="govuk-link">Search again</a>
            </p>

            {% set addressLines = [] %}

            {% set addressLines = (addressLines.push(
              {
                value: "",
                text: "Select an address"
              }
            ), addressLines) %}

            {% if addressData or data.results %}
              {% for item in addressData or data.results %}
                {% set addressLines = (addressLines.push(
                  {
                    value: item,
                    text: item
                  }
                ), addressLines)%}
              {% endfor %}
            {% endif %}

            {{ govukSelect({
              id: "select-an-address",
              name: "select-an-address",
              label: {
                text: "Select an address",
                classes: "govuk-visually-hidden"
              },
              items: addressLines
            }) }}
          </fieldset>
        </div>

        {{ govukButton({
          text: "Use this address",
          href: data.find_an_address_exit_url | d("/")
        }) }}

      </form>

      <p class="govuk-body govuk-!-margin-bottom-0">
        <a href="/dwp-find-an-address-plugin-simple/manual-entry" class="govuk-link">Enter address manually</a>
      </p>
    </div>
  </div>

{% endblock %}
