{% extends "layouts/main.html" %}
{% from "components/product-service-header/macro.njk" import productServiceHeader %}

{% block pageTitle %}
Defra Form Designer – {{ serviceName }} – GOV.UK Prototype Kit
{% endblock %}

{# {% block beforeContent %}
{{ govukBackLink({
text: "Back",
href: "javascript:window.history.back()"
}) }}
{% endblock %} #}

{% block header %}
{{ productServiceHeader({
organisationName: "Defra",
productName: "Form Designer",
serviceName: "",
homepageLink: "/titan-mvp-1.2/product-pages/homepage",
signInLink: "/titan-mvp-1.2/library",
navigationItems: [
{ href: "/titan-mvp-1.2/product-pages/about", text: "About", id: "nav-about" },

{ href: "/titan-mvp-1.2/product-pages/get-started", text: "Get started", id: "nav-get-started" },
{ href: "/titan-mvp-1.2/product-pages/features", text: "Features", id: "nav-features" },
{ href: "/titan-mvp-1.2/product-pages/resources", text: "Resources", id: "nav-resources" },
{ href: "/titan-mvp-1.2/product-pages/support", text: "Support", id: "nav-support" }
],
activeLinkId: ""
}) }}

{# Custom masthead implementation that allows positioning "What's new" content in the right column #}
<div class="x-govuk-masthead x-govuk-masthead--inverse" style="background-color: #0a8631!important;">
    <div class="govuk-width-container">
        <div class="govuk-grid-row">
            <div class="govuk-grid-column-two-thirds-from-desktop">
                <h1 class="x-govuk-masthead__title" style="color: white!important;">
                    Create and publish Defra forms on GOV.UK
                </h1>
                <p class="x-govuk-masthead__description" style="color: white!important;">
                    Make it easier for the public to submit information to Defra.
                </p>
                <a href="/titan-mvp-1.2/onboarding/sign-in" role="button" draggable="false"
                    class="govuk-button govuk-button--inverse govuk-button--start" data-module="govuk-button">
                    Sign in
                    <svg class="govuk-button__start-icon" xmlns="http://www.w3.org/2000/svg" width="17.5" height="19"
                        viewBox="0 0 33 40" aria-hidden="true" focusable="false">
                        <path fill="currentColor" d="M0 0h13l20 20-20 20H0l20-20z" />
                    </svg>
                </a>
            </div>
            <div class="govuk-grid-column-one-third-from-desktop">
                {# "What's new" content positioned where the image would be, following NHS pattern #}
                <div class="govuk-card govuk-card--feature govuk-!-margin-top-6"
                    style="background-color:transparent; border: 1px solid #EFF6F3; margin: 0; padding: 0; min-height: fit-content; max-height: fit-content">
                    <div class="govuk-card__content" style="padding: 20px;">

                        <h2 class="govuk-card__heading govuk-heading-m" style="margin-top: 0; color: white!important;">
                            <a href="#" class="govuk-link govuk-link--no-visited-state govuk-link--inverse"
                                style="color: white !important;">What's
                                new</a>
                        </h2>


                        <div class="govuk-!-text-align-left govuk-!-margin-bottom-4">
                            <time class="govuk-body-s" datetime="2025-06-14T14:01:00.000Z"
                                style="color: white!important;">14 June 2025</time>
                        </div>

                        <p class="govuk-body" style="color: white!important;">
                            New conditions and accessibility improvements and updates to preview panel functionality.
                        </p>


                    </div>

                    {# <p class="govuk-body"
                        style="color: white; margin-bottom: 0!important; padding-bottom: 0!important;">
                        <a href="#" class="govuk-link--no-visited-state govuk-link--inverse">Read the full
                            release notes</a>.
                    </p> #}
                </div>
            </div>
        </div>
    </div>

</div>
</div>

{% endblock %}

{% block content %}
<div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">

        {# Main content section with tabs #}
        <div class="govuk-tabs" data-module="govuk-tabs">
            <h2 class="govuk-tabs__title">
                Contents
            </h2>
            <ul class="govuk-tabs__list">
                <li class="govuk-tabs__list-item govuk-tabs__list-item--selected">
                    <a class="govuk-tabs__tab" href="#core-features">
                        Core features
                    </a>
                </li>
                <li class="govuk-tabs__list-item">
                    <a class="govuk-tabs__tab" href="#user-experience">
                        User experience
                    </a>
                </li>
                <li class="govuk-tabs__list-item">
                    <a class="govuk-tabs__tab" href="#advanced-patterns">
                        Advanced patterns
                    </a>
                </li>
                <li class="govuk-tabs__list-item">
                    <a class="govuk-tabs__tab" href="#developer-plugin">
                        Developer plugin
                    </a>
                </li>
            </ul>

            {# Core features tab #}
            <div class="govuk-tabs__panel" id="core-features">
                <h2 class="govuk-heading-l">Core features</h2>

                {# Feature 1: Build accessible forms #}
                <div class="govuk-grid-row govuk-!-margin-bottom-6">
                    <div class="govuk-grid-column-two-thirds">
                        <h3 class="govuk-heading-m">Build accessible forms</h3>
                        <p class="govuk-body">Create pages with GOV.UK components, validation and guidance built in.
                            Build forms
                            that meet accessibility standards and provide a great user experience.</p>
                        {# <p class="govuk-body">
                            <a class="govuk-link--no-visited-state" href="/titan-mvp-1.2/product-pages/features">Read
                                more about
                                form features</a>
                        </p> #}
                    </div>
                    <div class="govuk-grid-column-one-third">
                        <img src="/public/images/accessibility-figure.svg" class="govuk-!-width-full"
                            alt="Diagram showing accessibility features and form components">
                    </div>
                </div>

                <hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible">

                {# Feature 2: Page conditions #}
                <div class="govuk-grid-row govuk-!-margin-bottom-6">
                    <div class="govuk-grid-column-two-thirds">
                        <h3 class="govuk-heading-m">Page conditions</h3>
                        <p class="govuk-body">Show pages based on answers, and manage all conditions in one place.
                        </p>
                        {# <p class="govuk-body">
                            <a class="govuk-link--no-visited-state" href="/titan-mvp-1.2/product-pages/features">Learn
                                about
                                conditional logic</a>
                        </p> #}
                    </div>
                    <div class="govuk-grid-column-one-third">
                        <img src="/public/images/conditions-figure.svg" class="govuk-!-width-full"
                            alt="Diagram showing conditional form flow with branching paths">
                    </div>
                </div>

                <hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible">

                {# Feature 3: Preview and collaborate #}
                <div class="govuk-grid-row govuk-!-margin-bottom-6">
                    <div class="govuk-grid-column-two-thirds">
                        <h3 class="govuk-heading-m">Preview and collaborate</h3>
                        <p class="govuk-body">Share draft previews, review changes and keep an audit trail of edits.
                            Test your
                            forms
                            before publishing to ensure they work as expected.</p>
                        <p class="govuk-body">Use the interactive preview panel to see exactly how your form will
                            appear
                            to
                            users,
                            and collaborate with team members to refine the user experience.</p>
                        <p class="govuk-body">
                            <a class="govuk-link--no-visited-state" href="/titan-mvp-1.2/product-pages/features">Explore
                                preview
                                features</a>
                        </p>
                    </div>
                    <div class="govuk-grid-column-one-third">
                        <img src="/public/images/previewflow.gif" class="govuk-!-width-full"
                            alt="Animated demonstration of the preview panel showing form editing interface">
                    </div>
                </div>
                <hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible">

                {# Tab-specific call-to-action #}
                <div class="govuk-!-margin-top-6">
                    <div class="govuk-grid-row">
                        <div class="govuk-grid-column-one-half">
                            <div class="govuk-inset-text--cta">
                                <p class="govuk-body govuk-!-margin-bottom-0">
                                    <a href="/titan-mvp-1.2/product-pages/features"
                                        class="govuk-link--no-visited-state">View
                                        full feature list and
                                        upcoming features</a>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            {# User experience tab #}
            <div class="govuk-tabs__panel govuk-tabs__panel--hidden" id="user-experience">
                <h2 class="govuk-heading-l">User experience</h2>

                {# Feature 4: Consistent labels and error messages #}
                <div class="govuk-grid-row govuk-!-margin-bottom-6">
                    <div class="govuk-grid-column-two-thirds">
                        <h3 class="govuk-heading-m">Consistent labels and error messages</h3>
                        <p class="govuk-body">
                            Each question's short description automatically generates error messages (using GOV.UK
                            Design System
                            templates) as well
                            as the labels shown on check answers pages and in confirmation emails. This keeps your
                            forms
                            consistent
                            with other GOV.UK forms, and saving
                            you from writing them yourself so you can focus on designing the rest of your form.
                        </p>
                        <p class="govuk-body">
                            <a class="govuk-link--no-visited-state" href="/titan-mvp-1.2/product-pages/features">Explore
                                error
                                message
                                features</a>
                        </p>
                    </div>
                    <div class="govuk-grid-column-one-third-from-desktop">
                        <img src="/public/images/errors.gif" class="govuk-!-width-full"
                            alt="Animated demonstration of error message generation and display">
                    </div>
                </div>

                <hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible">

                {# Feature 5: Save progress #}
                <div class="govuk-grid-row govuk-!-margin-bottom-6">
                    <div class="govuk-grid-column-two-thirds">
                        <h3 class="govuk-heading-m">Let users save their progress and come back to it later</h3>
                        <p class="govuk-body">
                            People can save their progress at any point and finish later. We email a
                            magic link. When they return, they confirm a security answer and carry on
                            from where they left off. No account needed.
                        </p>
                        {# <p class="govuk-body">
                            <a class="govuk-link--no-visited-state" href="/titan-mvp-1.2/product-pages/features">Learn
                                about
                                save and return</a>
                        </p> #}
                    </div>
                    <div class="govuk-grid-column-one-third">
                        <img src="/public/images/save-exit.svg" class="govuk-!-width-full"
                            alt="Illustration showing save and return functionality with progress indicator">
                    </div>
                </div>

                <hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible">

                {# Feature 6: Data retrieval options #}
                <div class="govuk-grid-row govuk-!-margin-bottom-6">
                    <div class="govuk-grid-column-two-thirds">
                        <h3 class="govuk-heading-m">Choose how to retrieve submission data</h3>
                        <p class="govuk-body">
                            Flexible options for accessing and managing form submission data. Choose the method that
                            best fits
                            your
                            workflow and requirements.
                        </p>
                        {# <p class="govuk-body">
                            <a class="govuk-link--no-visited-state" href="/titan-mvp-1.2/product-pages/features">Learn
                                about
                                data retrieval</a>
                        </p> #}
                    </div>
                    <div class="govuk-grid-column-one-third">
                        <img src="/public/images/outputs.svg" class="govuk-!-width-full"
                            alt="Diagram showing different data retrieval and export options">
                    </div>
                </div>

                <hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible">

                {# Tab-specific call-to-action #}
                <div class="govuk-!-margin-top-6">
                    <div class="govuk-grid-row">
                        <div class="govuk-grid-column-one-half">
                            <div class="govuk-inset-text--cta">
                                <p class="govuk-body govuk-!-margin-bottom-0">
                                    <a href="/titan-mvp-1.2/product-pages/features"
                                        class="govuk-link--no-visited-state">View
                                        full feature list and
                                        upcoming features</a>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            {# Advanced patterns tab #}
            <div class="govuk-tabs__panel govuk-tabs__panel--hidden" id="advanced-patterns">
                <h2 class="govuk-heading-l">Advanced patterns</h2>

                {# Feature 7: Add another pattern #}
                <div class="govuk-grid-row govuk-!-margin-bottom-6">
                    <div class="govuk-grid-column-two-thirds">
                        <h3 class="govuk-heading-m">Collect the same information for several items</h3>
                        <p class="govuk-body">
                            Based on the <a href="https://design-system.dwp.gov.uk/patterns/add-another-thing"
                                class="govuk-link--no-visited-state govuk-link--no-visited-state">DWP Design System
                                'Add
                                another
                                thing'
                                pattern</a>,
                            this pattern is used when people need to give the same details about more than one
                            thing.
                            For
                            example,
                            dependants, vehicles or conditions. The questions repeat one item at a time, and users
                            can
                            review,
                            change or remove items before moving on. This keeps the journey simple and clear.
                        </p>
                        {# <p class="govuk-body">
                            <a class="govuk-link--no-visited-state" href="/titan-mvp-1.2/product-pages/features">Learn
                                about the
                                add another
                                pattern</a>
                        </p> #}
                    </div>
                    <div class="govuk-grid-column-one-third">
                        <img src="/public/images/add-another.svg" class="govuk-!-width-full"
                            alt="Illustration showing the add another pattern with repeating form sections">
                    </div>
                </div>

                <hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible">

                {# Feature 8: File upload #}
                <div class="govuk-grid-row govuk-!-margin-bottom-6">
                    <div class="govuk-grid-column-two-thirds">
                        <h3 class="govuk-heading-m">Let users upload more than one file at a time</h3>
                        <p class="govuk-body">
                            Follows principles from the HMRC <a
                                href="https://design.tax.service.gov.uk/hmrc-design-patterns/file-upload/"
                                class="govuk-link--no-visited-state govuk-link--no-visited-state">file upload
                                pattern</a>. Users
                            can upload
                            multiple
                            files, and see their progress and status as they are uploaded to their form.
                        </p>
                        <ul class="govuk-list govuk-list--bullet">
                            <li>shows and announces progress while uploading and keeps the button visible to add
                                more
                            </li>
                            <li>lets users remove or replace individual files before continuing</li>
                            <li>validates type and size per file and explains any errors in plain English</li>
                        </ul>
                        {# <p class="govuk-body">
                            <a class="govuk-link--no-visited-state" href="/titan-mvp-1.2/product-pages/features">See
                                file upload
                                details</a>
                        </p> #}
                    </div>
                    <div class="govuk-grid-column-one-third">
                        <img src="/public/images/files.gif" class="govuk-!-width-full"
                            alt="Animated demonstration of file upload interface with progress indicators">
                    </div>
                </div>

                <hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible">

                {# Tab-specific call-to-action #}
                <div class="govuk-!-margin-top-6">
                    <div class="govuk-grid-row">
                        <div class="govuk-grid-column-one-half">
                            <div class="govuk-inset-text--cta">
                                <p class="govuk-body govuk-!-margin-bottom-0">
                                    <a href="/titan-mvp-1.2/product-pages/features"
                                        class="govuk-link--no-visited-state">View
                                        full feature list and
                                        upcoming features</a>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            {# Developer tools tab #}
            <div class="govuk-tabs__panel govuk-tabs__panel--hidden" id="developer-plugin">
                <h2 class="govuk-heading-l">Developer plugin</h2>

                {# Feature 9: Developer plugin #}
                <div class="govuk-grid-row govuk-!-margin-bottom-6">
                    <div class="govuk-grid-column-two-thirds">
                        <p class="govuk-body">The DEFRA Forms Engine Plugin is built on top of the Hapi framework,
                            so it
                            slots
                            neatly into apps you're already running there. It removes the need to hand-code every
                            form
                            page or
                            journey by letting you define everything in configuration.</p>

                        <p class="govuk-body">The plugin handles rendering, validation, accessibility, and the full
                            request
                            lifecycle, while still giving you the freedom to extend it with your own Hapi services,
                            routes, and
                            templates.</p>

                        <p class="govuk-body">That means less boilerplate, faster delivery, and accessible forms by
                            default.</p>

                        <p class="govuk-body">
                            <a class="govuk-link--no-visited-state" href="#">Read the documentation</a>
                        </p>
                    </div>
                    <div class="govuk-grid-column-one-third">
                        <img src="/public/images/plugin.svg" class="govuk-!-width-full"
                            alt="Animated demonstration of file upload interface with progress indicators">
                    </div>
                </div>

                <hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible">

                {# Tab-specific call-to-action #}
                <div class="govuk-!-margin-top-6">
                    <div class="govuk-grid-row">
                        <div class="govuk-grid-column-one-half">
                            <div class="govuk-inset-text--cta">
                                <p class="govuk-body govuk-!-margin-bottom-0">
                                    <a href="/titan-mvp-1.2/product-pages/features"
                                        class="govuk-link--no-visited-state">View
                                        full feature list and
                                        upcoming features</a>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="govuk-grid-row">

            <div class="govuk-grid-column-two-thirds">
                <h2 class="govuk-heading-l">Who's using Defra Forms</h2>
            </div>
            <div class="govuk-grid-column-full organisations-grid">
                <div class="content-section__image organisations-grid__logo">
                    <div class="gem-c-organisation-logo brand--department-for-environment-food-rural-affairs">
                        <div
                            class="gem-c-organisation-logo__container gem-c-organisation-logo__crest gem-c-organisation-logo__crest--single-identity brand__border-color">
                            <span class="gem-c-organisation-logo__name">Department<br>for Environment,<br>Food &amp;
                                Rural
                                Affairs</span>
                        </div>
                    </div>
                </div>
                <div class="content-section__image organisations-grid__logo">
                    <div class="gem-c-organisation-logo brand--department-for-environment-food-rural-affairs">
                        <div
                            class="gem-c-organisation-logo__container gem-c-organisation-logo__crest gem-c-organisation-logo__crest--single-identity brand__border-color">
                            <span class="gem-c-organisation-logo__name">Rural<br>Payments<br>Agency</span>
                        </div>
                    </div>
                </div>
                <div class="content-section__image organisations-grid__logo">
                    <div class="gem-c-organisation-logo brand--department-for-environment-food-rural-affairs">
                        <div
                            class="gem-c-organisation-logo__container gem-c-organisation-logo__crest gem-c-organisation-logo__crest--single-identity brand__border-color">
                            <span class="gem-c-organisation-logo__name">Animal &amp;<br>Plant
                                Health<br>Agency</span>
                        </div>
                    </div>
                </div>
                <img src="/public/images/fsa.svg" alt="Food Standards Agency – FSA"
                    class="content-section__image organisations-grid__logo">
                <img src="/public/images/EA.svg" alt="Environment Agency – EA"
                    class="content-section__image organisations-grid__logo">
                <img src="/public/images/NE.svg" alt="Natural England"
                    class="content-section__image organisations-grid__logo">
            </div>
        </div>
    </div>
</div>

<style>
    .content-section {
        margin-top: 30px;
    }

    .content-section__title {
        margin-top: 0;
    }

    .content-section__image {
        max-width: 100%;
        margin-bottom: 30px;
    }

    .content-section__video {
        border: 1px solid #b1b4b6;
        height: 0;
        overflow: hidden;
        position: relative;
        padding: 30px 5px 56.25%;
    }

    .content-section__video iframe,
    .content-section__video object {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
    }

    .content-section__transcript {
        margin: 5px 0;
        padding: 5px 0;
    }

    .content-section__transcript summary:hover {
        background-color: #f3f2f1;
    }

    .content-section--with-top-border {
        padding-top: 60px;
        border-top: 1px #b1b4b6 solid;
    }

    @media (min-width: 40.0625em) {
        .content-section--with-top-padding {
            padding-top: 60px;
        }
    }

    .content-section {
        margin-top: 30px;
    }

    .content-section__title {
        margin-top: 0;
    }

    .content-section__image {
        max-width: 100%;
        margin-bottom: 30px;
        margin-right: 30px;
    }

    .organisations-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 20px;
        align-items: start;
        justify-items: start;
        margin-top: 20px;
    }

    @media (min-width: 40.0625em) {
        .organisations-grid {
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
        }
    }

    @media (min-width: 48.0625em) {
        .organisations-grid {
            grid-template-columns: repeat(3, 1fr);
            gap: 40px;
            align-items: center;
            justify-items: start;
        }
    }

    .organisations-grid__logo {
        width: auto;
        height: 4em;
        display: block;
        max-width: 100%;
    }

    .organisations-grid__logo--small {
        height: 2.5em;
    }

    .feature-grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: 16px;
    }

    @media (min-width: 40.0625em) {

        /* tablet */
        .feature-grid {
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }
    }

    @media (min-width: 63.9375em) {

        /* desktop */
        .feature-grid {
            grid-template-columns: repeat(3, 1fr);
            gap: 24px;
        }
    }

    .feature-card {
        position: relative;
        display: flex;
        flex-direction: column;
        min-height: 260px;
        padding: 24px;
        border: 1px solid #b1b4b6;
        /* GOV.UK mid-grey border */
        border-radius: 10px;
        background: #ffffff;
        box-shadow: 0 1px 0 rgba(11, 12, 12, 0.05);
        transition: transform .12s ease-out, box-shadow .12s ease-out, border-color .12s ease-out;
    }

    .feature-card:hover,
    .feature-card:focus-within {
        transform: translateY(-2px);
        border-color: #b1b4b6;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    }

    .feature-card .govuk-heading-m {
        margin: 0 0 8px 0;
    }

    .feature-card .govuk-body {
        margin: 0;
    }

    .feature-card__cta {
        margin-top: 12px;
    }

    .feature-card__thumb {
        margin-top: auto;
        /* anchors the thumbnail at the bottom of the card */
        background: #ffffff;
        border: 1px solid #b1b4b6;
        border-radius: 8px;
        overflow: hidden;
    }

    /* Force a 16:9 display area and crop video to fill so no black side bars */
    .feature-card__thumb--16x9 {
        aspect-ratio: 16 / 9;
    }

    .feature-card__thumb--16x9 video {
        height: 100%;
        object-fit: cover;
        object-position: center;
        background: #ffffff;
    }

    .feature-card__thumb img,
    .feature-card__thumb svg,
    .feature-card__thumb video {
        display: block;
        width: 100%;
        height: auto;
    }

    .feature-card__icon {
        width: 48px;
        height: 48px;
        border-radius: 50%;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 12px;
        background: rgba(255, 255, 255, 0.6);
        border: 1px solid rgba(0, 0, 0, 0.05);
    }

    .feature-card__icon svg {
        width: 28px;
        height: 28px;
    }

    /* subtle status badge (for "Coming soon") */
    .feature-card__badge {
        position: absolute;
        top: 8px;
        right: 8px;
    }

    /* Variant backgrounds using GOV.UK palette tints (approx of govuk-tint) */
    .feature-card--mint {
        background: #e6f1ec;
        border-color: #80b89e;
    }

    /* green 90% bg, 50% border */
    .feature-card--sand {
        background: #fffce6;
        border-color: #ffee80;
    }

    /* yellow 90% bg, 50% border */
    .feature-card--peach {
        background: #fef1eb;
        border-color: #fabb9c;
    }

    /* orange 90% bg, 50% border */
    .feature-card--ice {
        background: #e8f1f8;
        border-color: #8eb8dc;
    }

    /* blue 90% bg, 50% border */
    .feature-card--lemon {
        background: #fffce6;
        border-color: #ffee80;
    }

    /* yellow 90% bg, 50% border */
    .feature-card--lilac {
        background: #edeaf4;
        border-color: #a696c8;
    }

    .images {
        &__width_100 {
            width: 100%;
            height: auto;
            max-height: 120px;
        }

        &__width_42 {
            width: 42%;
            height: auto;
        }

        &__vertical_align_top {
            vertical-align: top;
        }
    }

    /* purple 90% bg, 50% border */




    .govuk-card--feature {
        width: 100%;
        display: flex;
        flex-direction: column;
        transition: all 0.2s ease-in-out;
        border: 2px solid #b1b4b6;
        background-color: #ffffff;
    }

    .govuk-card__content {
        flex: 1;
        display: flex;
        flex-direction: column;
        /* padding: 1.5rem; */
    }

    .govuk-card__header {
        margin-bottom: 1rem;
        padding-bottom: 0.5rem;
        border-bottom: 1px solid #d8dde0;
        display: flex;
        align-items: center;
        gap: 0.75rem;
    }

    .govuk-card__header h3 {
        margin: 0;
        color: #0b0c0c;
    }

    .feature-icon {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 32px;
        height: 32px;
        flex-shrink: 0;
    }

    .govuk-card__content p,
    .govuk-card__content ul {
        flex: 1;
        margin-bottom: 0;
    }

    .govuk-card--coming-soon {
        /* opacity: 0.8; */
        background-color: #f8f9fa;
    }

    .govuk-inset-text--cta {
        border-left: 4px solid #00703c;
        background-color: #f3f2f1;
        padding: 1.5rem;
        margin: 2rem 0;
    }





    /* Improved card spacing */
    .govuk-card {
        margin-bottom: 1rem;
    }

    /* GOV.UK Related Navigation Component Styles */
    .gem-c-related-navigation {
        border-top: 2px solid #00703c;
        margin-bottom: 60px;
        color: #0b0c0c;
    }

    .gem-c-related-navigation__main-heading {
        margin-top: 15px;
        margin-bottom: 10px;
        font-family: "GDS Transport", arial, sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        font-weight: 700;
        font-size: 1.1875rem;
        line-height: 1.3157894737;
    }

    .gem-c-related-navigation__nav-section {
        margin-bottom: 30px;
    }

    .gem-c-related-navigation__link-list {
        padding: 0;
        margin: 0;
        list-style: none;
        margin-bottom: 1.25em;
    }

    .gem-c-related-navigation__link {
        list-style-type: none;
        margin-top: 15px;
        font-family: "GDS Transport", arial, sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        font-weight: 400;
        font-size: 1rem;
        line-height: 1.45;
    }

    @media (min-width: 40.0625em) {
        .gem-c-related-navigation__link {
            line-height: 1.28;
        }
    }

    @media all {
        .govuk-link {
            font-family: "GDS Transport", arial, sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            text-decoration: underline;
            text-decoration-thickness: max(1px, .0625rem);
            text-underline-offset: .1578em;
        }
    }

    .gem-c-related-navigation__section-link {
        font-weight: bold;
    }

    .gem-c-related-navigation__section-link--other {
        font-weight: normal;
    }
</style>

<script>
    document.querySelectorAll('.feature-card__thumb img').forEach(img => {
        const still = img.getAttribute('src');
        const anim = img.dataset.gif;
        const card = img.closest('.feature-card');

        const play = () => img.src = anim;
        const stop = () => img.src = still;

        card.addEventListener('mouseenter', play);
        card.addEventListener('mouseleave', stop);
        card.addEventListener('focusin', play);
        card.addEventListener('focusout', stop);

        // Respect reduced motion
        if (window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
            card.removeEventListener('mouseenter', play);
            card.removeEventListener('focusin', play);
        }
    });
</script>
<script>
    (function () {
        var reduceMotion = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
        var cards = document.querySelectorAll('.feature-card');
        cards.forEach(function (card) {
            var video = card.querySelector('.feature-card__thumb video');
            if (!video) return;

            function play() {
                if (reduceMotion) return;
                try {
                    video.currentTime = 0;
                    var p = video.play();
                    if (p && p.catch) { p.catch(function () { /* ignore autoplay block */ }); }
                } catch (e) { }
            }
            function stop() {
                try { video.pause(); } catch (e) { }
                try { video.currentTime = 0; } catch (e) { }
            }

            card.addEventListener('mouseenter', play);
            card.addEventListener('mouseleave', stop);
            card.addEventListener('focusin', play);
            card.addEventListener('focusout', stop);

            if ('IntersectionObserver' in window) {
                var io = new IntersectionObserver(function (entries) {
                    entries.forEach(function (entry) { if (!entry.isIntersecting) stop(); });
                }, { threshold: 0.1 });
                io.observe(video);
            }
        });
    })();
</script>
{% endblock %}