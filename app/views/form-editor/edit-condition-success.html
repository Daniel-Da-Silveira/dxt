{% extends "layouts/main.html" %}
{% from "components/service-header/macro.njk" import serviceHeader %}
{% set pageName = "Edit condition - Apply for a county parish holding number in England" %}

{% block header %}
{{ serviceHeader({
organisationName: "Defra",
productName: "Forms Designer",
serviceName: "",
containerClasses: containerClasses,
accountName: "Chris Smith",
homepageLink: "/",
signOutLink: "/onboarding/sign-out-confirmation",
navigationItems: [
{ href: "/library.html", text: "Forms library", id: "nav-library" },
{ href: "/cph-overview/draft/complete-clean.html", text: "Overview", id: "nav-overview" },
{ href: "/form-editor/listing", text: "Editor", id: "nav-editor" }
],
activeLinkId: "nav-editor"
}) }}

<div class="x-govuk-masthead x-govuk-masthead--large">
    <div class="govuk-width-container">
        {{ govukBackLink({ classes: "govuk-back-link--inverse govuk-!-margin-bottom-0", text:
        commonTerms.form_editor.navigation.back_to_add_edit_pages, href: "/form-editor/listing.html" }) }}

        <hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible"
            style="border-bottom: 1px solid white; margin-bottom: 0" />

        <div class="govuk-grid-row">
            <div class="govuk-grid-column-full-from-desktop">
                <h1 class="x-govuk-masthead__title">
                    Edit condition
                </h1>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block content %}
<div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
        <div class="govuk-grid-row">
            <div class="govuk-grid-column-two-thirds-from-desktop">
                <nav class="moj-sub-navigation govuk-!-margin-bottom-8" aria-label="Sub navigation">
                    <ul class="moj-sub-navigation__list">
                        <li class="moj-sub-navigation__item">
                            <a class="moj-sub-navigation__link" href="/form-editor/conditions-manager">
                                Conditions
                            </a>
                        </li>
                        <li class="moj-sub-navigation__item">
                            <a class="moj-sub-navigation__link" aria-current="page" href="#">
                                Edit condition
                            </a>
                        </li>
                    </ul>
                </nav>

                <div class="govuk-notification-banner govuk-notification-banner--success" role="alert"
                    aria-labelledby="govuk-notification-banner-title" data-module="govuk-notification-banner">
                    <div class="govuk-notification-banner__header">
                        <h2 class="govuk-notification-banner__title" id="govuk-notification-banner-title">
                            Success
                        </h2>
                    </div>
                    <div class="govuk-notification-banner__content">
                        <p class="govuk-notification-banner__heading">
                            Condition updated successfully
                        </p>
                    </div>
                </div>

                <div class="govuk-summary-card govuk-!-margin-bottom-6">
                    <div class="govuk-summary-card__title-wrapper">
                        <h2 class="govuk-summary-card__title">Original condition</h2>
                    </div>
                    <div class="govuk-summary-card__content">
                        <p class="govuk-body govuk-!-font-weight-bold">{{ originalCondition.conditionName }}</p>
                        <p class="govuk-body">
                            {% for rule in originalCondition.rules %}
                            {% if loop.first %}
                            '{{ rule.questionText }}' {{ rule.operator | replace("-", " ") }} '{{ rule.value }}'
                            {% else %}
                            <span class="govuk-!-font-weight-bold">{{ rule.logicalOperator | default('AND') }}</span>
                            '{{ rule.questionText }}' {{ rule.operator | replace("-", " ") }} '{{ rule.value }}'
                            {% endif %}
                            {% endfor %}
                        </p>
                    </div>
                </div>

                <div class="govuk-summary-card govuk-!-margin-bottom-6" style="border-left: 5px solid #008938;">
                    <div class="govuk-summary-card__title-wrapper">
                        <h2 class="govuk-summary-card__title">Updated condition</h2>
                    </div>
                    <div class="govuk-summary-card__content">
                        <p class="govuk-body govuk-!-font-weight-bold">{{ updatedCondition.conditionName }}</p>
                        <p class="govuk-body">
                            {% for rule in updatedCondition.rules %}
                            {% if loop.first %}
                            '{{ rule.questionText }}' {{ rule.operator | replace("-", " ") }} '{{ rule.value }}'
                            {% else %}
                            <span class="govuk-!-font-weight-bold">{{ rule.logicalOperator | default('AND') }}</span>
                            '{{ rule.questionText }}' {{ rule.operator | replace("-", " ") }} '{{ rule.value }}'
                            {% endif %}
                            {% endfor %}
                        </p>
                    </div>
                </div>

                <div class="govuk-button-group">
                    <a href="/form-editor/conditions-manager" class="govuk-button" data-module="govuk-button">
                        Finish editing condition
                    </a>

                    <a href="/form-editor/edit-condition/{{ updatedCondition.id }}" role="button" draggable="false"
                        class="govuk-button govuk-button--secondary" data-module="govuk-button">
                        Continue editing
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}